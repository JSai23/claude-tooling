---
name: common-design-docs-k
type: knowledge
description: The agent documentation system — doc types, folder structure, frontmatter conventions, agent roles, lifecycle
user-invocable: false
---

> **Knowledge skill** — Design documentation system: doc types, folder structure, frontmatter conventions, agent roles.

# Agent Documentation System

Agent docs are design documentation that agents create and maintain — plans, living docs, architecture maps, and principles. They live in `design-docs/` folders, separate from external docs (API references, generated documentation, user-facing guides).

## Foresight vs Hindsight

**Plans are foresight.** Written before building. "Here's what we're going to do."

**Everything else is hindsight.** Written after building. "Here's how it works now."

Never write living docs about code that doesn't exist yet. Never plan in hindsight.

## Doc Types

### Plans
Bounded work with a lifecycle: `draft → active → complete`. Plans have milestones, acceptance criteria, and a defined end state. Once complete, they become historical records.

There are two kinds of plans:
- **Design plans** — system design, architecture, how components interact. Higher-level. How things should work.
- **Implementation plans** — code-level. What the code looks like, what to build, in what order. Milestones, steps, acceptance criteria.

Small features may combine both in one document. Larger efforts separate them — a design plan at a higher level, implementation plans nested beneath for each buildable piece.

Plans live centralized at `design-docs/plans/`. Plans can nest — a parent plan defines vision and ordering, child plans are independently buildable. Sibling plans are parallel efforts (different services, different components). Nested plans are phases of the same effort (blocks within a service).

### Living Docs
Describe how things work *now*. Staleness is a bug. Living docs emerge from implementation — created after building, not before.

- **System docs** — how a service/module/component works
- **Integration docs** — how things connect, contracts, boundaries
- **Data docs** — models, schemas, state machines
- **Test docs** — test strategy, fixture guides, integration setup

Living docs live near what they describe — distributed, not centralized:
- System-level: `design-docs/` at repo root
- Package-level: `{package}/design-docs/`
- Test-level: `{test-dir}/design-docs/`

### ARCHITECTURE.md
The entry point. System map at `design-docs/ARCHITECTURE.md`. Links to deeper living docs. An agent starting a fresh session reads this first.

### PRINCIPLES.md
Golden rules at `design-docs/PRINCIPLES.md`. Short, opinionated, evolved through experience.

## Folder Structure

```
design-docs/                            # System-level (repo root)
├── plans/                              # ALL plans — centralized
│   ├── index.md                        # Catalogue of all plans
│   └── {name}/
│       ├── plan.md                     # The plan (foresight)
│       ├── decisions.md                # Decisions made during execution
│       ├── verification.md             # Verifier's report
│       └── {sub-plan}/                 # Nested child plans
│           └── plan.md
│
├── ARCHITECTURE.md                     # System map — the entry point
├── PRINCIPLES.md                       # Golden rules
└── {topic}.md                          # System-level living docs (hindsight)

{package}/
├── design-docs/                        # Package-level living docs
│   └── {topic}.md
└── tests/
    └── design-docs/                    # Test-level living docs
```

## Frontmatter

### Plans
```yaml
---
status: draft | active | complete
created: YYYY-MM-DD
updated: YYYY-MM-DD
scope: system | package-name
parent: parent-plan-name        # if nested
related:                        # sibling or influencing plans
  - other-plan-name
---
```

### Living Docs
```yaml
---
created: YYYY-MM-DD
updated: YYYY-MM-DD
plans:                          # traceability — what plans shaped this
  - plan-that-created-this
  - plan-that-modified-this
---
```

### Decision Logs
```yaml
---
plan: plan-name
created: YYYY-MM-DD
---
```

Entries within docs use `[YYYY-MM-DD]` or `[YYYY-MM-DD HH:MM]` timestamps. Update the `updated` field on meaningful changes.

## Agent Roles

**Planner** — Creates plans. Reads ARCHITECTURE.md and living docs to understand the current state. Seeds ARCHITECTURE.md and PRINCIPLES.md if missing. Uses subagents for large file reads and parallel exploration. Confirms plan organization (sibling vs nested) with the user.

**Builder** — Primary author of living docs. After implementation, creates or updates living docs to reflect reality. Updates plan docs with progress and decisions. Links new living docs from ARCHITECTURE.md. Living docs are a core output, not an afterthought.

**Verifier** — Checks doc accuracy alongside code quality. Writes verification.md. Flags stale living docs, missing coverage, ARCHITECTURE.md drift.

**Gardener** — Maintains doc health over time. Audits living docs against reality, updates ARCHITECTURE.md and PRINCIPLES.md, marks completed plans, flags gaps.

## Lifecycle

1. Planner creates plan (draft → active)
2. Builder implements, updates plan (progress, surprises, decisions), creates living docs
3. Verifier reviews, writes verification.md
4. Plan marked complete — historical record
5. Gardener maintains living doc accuracy over time
